<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


<body>


  <app-navbar></app-navbar>

  <div class="head">
    <a routerLink="/pomodoro">
      <h1 class="backto">< back</h1>
    </a>
  </div>


  <div class="edit-pomodoro-container">

    <div class="pomodoroHeader">
      <h1 class="pomodoroHeader" style="color: rgb(10, 10, 10);">Setup new pomodoro</h1>
    </div>

    <!-- Nome Pomodoro -->
    <div class="form-group">
      <label for="title" class="label-input">Title</label>
      <input id="title" type="text" class="input-tag" [(ngModel)]="newPomodoroData.title" />
    </div>

    <!-- Durata studio -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 -->
    <div class="form-group">
      <label for="durationStudy" class="label-input">Study duration (minutes)</label>
      <input id="durationStudy" type="number" class="input-tag" [(ngModel)]="newPomodoroData.durationStudy" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Durata pausa -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 -->
    <div class="form-group">
      <label for="durationBreak" class="label-input">Break duration (minutes)</label>
      <input id="durationBreak" type="number" class="input-tag" [(ngModel)]="newPomodoroData.durationBreak" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Numero cicli -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 e minore di 24h -->
    <div class="form-group">
      <label for="numberCycles" class="label-input">Number of cycles</label>
      <input id="numberCycles" type="number" class="input-tag" [(ngModel)]="newPomodoroData.numberCycles" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Durata del Pomodoro -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 e minore di 24h -->
    <div class="form-group">
      <label for="duration" class="label-input">Total duration (minutes)</label>
      <input id="duration" type="number" class="input-tag" [(ngModel)]="newPomodoroData.duration" (ngModelChange)="onDurationChange($event)"/>
    </div>


    <div class="button-group">
      <button type="button" (click)="creaPomodoro()" id="crea-pomodoro-button">START NOW</button>
      <button type="button" (click)="schedulePomodoro()" id="schedule-pomodoro-button">SCHEDULE</button>
    </div>


    <h1 style="font-size: 1rem; margin-top: 1.5rem; color: rgb(209, 209, 209);">Share settings with another user</h1>
    <div class="share">
      <input type="text" [(ngModel)]="receiverInput" placeholder="Enter username..." name="receiver" />
      <button type="button" (click)="sharePomodoro()" id="schedule-pomodoro-button">SHARE</button>
    </div>


  </div>




  <!-- POPUP SCHEDULAZIONE POMODORO -->

  <div class="popup-schedule" *ngIf="showPopupSchedulePomodoro">
    <div class="schedule-box">

      <!-- header -->
      <div class="schedule-header">
        <h2 class="schedule-title">Schedule Pomodoro</h2>
        <!-- <button class="close-btn" (click)="closeScheduleBox()">&times;</button> -->
        <svg style="height: 2rem;" (click)="closeScheduleBox()" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>
      </div>

      <!-- data e ora di inizio -->
      <div class="form-group">
        <label for="startDate" class="label-input">Date / Time</label>
        <input id="startDate" type="datetime-local" class="input-tag" [(ngModel)]="newPomodoroData.startDateString" />
      </div>

      <!-- sezione ripetizioni -->
      <div class="recurrence">
        <label id="recurrence-label">Repeat:</label>
        <select class="recurrence-select" [(ngModel)]="recurrence">
          <option value="none">Disabled</option>
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
          <option value="yearly">Annual</option>
        </select>
      </div>
<!--      </select>-->
<!--      <div class="repeat-section">-->
<!--        <div class="checkbox-wrapper">-->
<!--          <input id="enableRepeat" type="checkbox" />-->
<!--          <label for="enableRepeat" class="label-input" style="margin-bottom: 0;">Ripeti questo Pomodoro</label>-->
<!--        </div>-->

<!--        &lt;!&ndash; TODO scegliere come strutturare la frequenza a frontend &ndash;&gt;-->


<!--      </div>-->

      <div class="button-group">
        <button type="button" (click)="creaScheduledPomodoro()" id="conferma-schedule-button">ADD TO CALENDAR</button>
      </div>


    </div>
  </div>


  <app-footer></app-footer>

  <app-timemachine></app-timemachine>
</body>
