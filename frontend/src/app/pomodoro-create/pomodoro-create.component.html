<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


<body>


  <app-navbar></app-navbar>

  <div class="head">
    <a routerLink="/pomodoro">
      <h1 class="backto">< back</h1>
    </a>
  </div>


  <div class="edit-pomodoro-container">

    <div class="pomodoroHeader">
      <h1 class="pomodoroHeader">Crea Nuovo Pomodoro</h1>
    </div>

    <!-- Nome Pomodoro -->
    <div class="form-group">
      <label for="title" class="label-input">Nome Pomodoro</label>
      <input id="title" type="text" class="input-tag" [(ngModel)]="newPomodoroData.title" />
    </div>

    <!-- Durata studio -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 -->
    <div class="form-group">
      <label for="durationStudy" class="label-input">Durata Studio (minuti)</label>
      <input id="durationStudy" type="number" class="input-tag" [(ngModel)]="newPomodoroData.durationStudy" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Durata pausa -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 -->
    <div class="form-group">
      <label for="durationBreak" class="label-input">Durata Pausa (minuti)</label>
      <input id="durationBreak" type="number" class="input-tag" [(ngModel)]="newPomodoroData.durationBreak" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Numero cicli -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 e minore di 24h -->
    <div class="form-group">
      <label for="numberCycles" class="label-input">Numero di Cicli</label>
      <input id="numberCycles" type="number" class="input-tag" [(ngModel)]="newPomodoroData.numberCycles" (ngModelChange)="onNumberCyclesChange($event)"/>
    </div>

    <!-- Durata del Pomodoro -->
    <!-- TODO il valore qui dentro deve essere maggiore di 0 e minore di 24h -->
    <div class="form-group">
      <label for="duration" class="label-input">Durata Totale (minuti)</label>
      <input id="duration" type="number" class="input-tag" [(ngModel)]="newPomodoroData.duration" (ngModelChange)="onDurationChange($event)"/>
    </div>


    <div class="button-group">
      <button type="button" (click)="creaPomodoro()" id="crea-pomodoro-button">START NOW</button>
      <button type="button" (click)="schedulePomodoro()" id="schedule-pomodoro-button">SCHEDULE</button>
    </div>

  </div>




  <!-- POPUP SCHEDULAZIONE POMODORO -->

  <div class="popup-schedule" *ngIf="showPopupSchedulePomodoro">
    <div class="schedule-box">

      <!-- header -->
      <div class="schedule-header">
        <h2 class="schedule-title">Programma Pomodoro</h2>
        <button class="close-btn" (click)="closeScheduleBox()">&times;</button>
      </div>

      <!-- data e ora di inizio -->
      <div class="form-group">
        <label for="startDate" class="label-input">Data e Ora di Inizio</label>
        <input id="startDate" type="datetime-local" class="input-tag" [(ngModel)]="newPomodoroData.startDateString" />
      </div>

      <!-- sezione ripetizioni -->
      <div class="repeat-section">
        <div class="checkbox-wrapper">
          <input id="enableRepeat" type="checkbox" />
          <label for="enableRepeat" class="label-input" style="margin-bottom: 0;">Ripeti questo Pomodoro</label>
        </div>

        <!-- TODO scegliere come strutturare la frequenza a frontend -->


      </div>

      <div class="button-group">
        <button type="button" (click)="creaScheduledPomodoro()" id="conferma-schedule-button">CONFERMA</button>
      </div>


    </div>
  </div>


  <app-footer></app-footer>

  <app-timemachine></app-timemachine>
</body>
