<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<body>
  <app-navbar></app-navbar>

    <div [ngStyle]="pomodoro.state === 'DA INIZIARE' ? {'background-color': 'rgb(200, 200, 200)'} :
           pomodoro.state === 'STUDIO' ? {'background-color':'#FF9A9A'} :
           pomodoro.state === 'PAUSA' ? {'background-color': '#C7FBFF'} :
           pomodoro.state === 'COMPLETATO' ? {'background-color': '#AFFFA8'} :
           null" class="page-content">

      <div class="head">
      <a routerLink="">
        <h1 class="backto">< back</h1>
      </a>
    </div>

    <div class="manage-pomodoros">
      <a routerLink="/create-pomodoro">
        <button id="new-pomodoro-button" class="management-button" style="border-right: 1px solid black;">
          NEW POMODORO
        </button>
      </a>
    </div>

    <div class="container_pomodoro">
      <div class="nome_pomodoro"> {{ pomodoro.name }} </div>

      <div class="timer_pomodoro">{{ minutes }} : {{ seconds }}</div>

      <div class="stato-pomodoro">{{ pomodoro.state}}</div>

      <div *ngIf="pomodoro.cyclesLeft > 0" class="cicli-pomodoro">Cicli Rimasti: {{ pomodoro.cyclesLeft }}</div>

      <!-- TODO da aggiustare le condizioni con cui rendere visibili i tasti -> usare delle funzioni basandoci sullo stato del Pomodoro (invece che delle variabili) -->
      <div class="buttons_pomodoro">
        <button *ngIf="startStudioIsVisible" (click)="startStudio()" [disabled]="!actionButtonIsClickable" class="action-button" style="width: 100%; padding: 0 0.7rem; margin: 0.3rem 0" >INIZIA STUDIO</button>
        <button *ngIf="startPausaIsVisible" (click)="startPausa()" class="action-button" style="width: 100%; padding: 0 0.7rem; margin: 0.3rem 0" >INIZIA PAUSA</button>
        <button *ngIf="fineCicloIsVisible" class="action-button" (click)="fineCiclo()" style="width: 100%; padding: 0 0.7rem; margin: 0.3rem 0" >FINE CICLO</button>
        <button *ngIf="ricominciaCicloIsVisible" class="action-button" (click)="ricominciaCiclo()" style="width: 100%; padding: 0 0.7rem; margin: 0.3rem 0" >RICOMINCIA CICLO</button>
      </div>


      <!-- Animazione Studio -->
      <div class="animated-background study" *ngIf="pomodoro.state === 'STUDIO'"></div>

      <!-- Animazione Pausa -->
      <div class="animated-background break" *ngIf="pomodoro.state === 'PAUSA'"></div>

      <!-- Animazione Pomodoro Completato -->
      <div class="animated-background completed" *ngIf="pomodoro.state === 'COMPLETATO'"></div>

    </div>

    <app-footer></app-footer>

    <app-timemachine></app-timemachine>
  </div>

</body>
